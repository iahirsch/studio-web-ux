<div class="location-selector">
  <!-- Akkordeon 1: Startort -->
  <div class="accordion mb-4">
    <details class="bg-white rounded-lg shadow-md">
      <summary class="p-4 cursor-pointer flex justify-between items-center">
        <div>
          <h3 class="font-medium">Startort</h3>
          <p class="text-sm text-gray-600">{{ currentLocationLabel }}</p>
        </div>
        <span class="arrow"></span>
      </summary>
      <div class="p-4 border-t">
        <div class="mb-4">
          <button type="button" class="btn btn-sm btn-outline mb-3" (click)="getCurrentLocation()">
            Aktuellen Standort verwenden
          </button>
        </div>

        <h4 class="mb-2 text-sm font-medium">HSLU Standorte:</h4>
        <div class="flex flex-wrap gap-2 mt-2">
          <button *ngFor="let location of locations"
                  class="pill"
                  [class.active]="selectedFromLocation?.id === location.id"
                  (click)="selectFromLocation(location)">
            {{ location.title }} ({{ location.city }})
          </button>
        </div>
      </div>
    </details>
  </div>

  <!-- Akkordeon 2: Zielort -->
  <div class="accordion mb-4">
    <details class="bg-white rounded-lg shadow-md">
      <summary class="p-4 cursor-pointer flex justify-between items-center">
        <div>
          <h3 class="font-medium">Zielort</h3>
          <p class="text-sm text-gray-600">{{ destinationLocationLabel }}</p>
        </div>
        <span class="arrow"></span>
      </summary>
      <div class="p-4 border-t">
        <h4 class="mb-2 text-sm font-medium">HSLU Standorte:</h4>
        <div class="flex flex-wrap gap-2 mt-2">
          <button *ngFor="let location of locations"
                  class="pill"
                  [class.active]="selectedToLocation?.id === location.id"
                  (click)="selectToLocation(location)">
            {{ location.title }} ({{ location.city }})
          </button>
        </div>
      </div>
    </details>
  </div>

  <!-- Formulardaten werden weiterhin Ã¼ber travelForm synchronisiert -->
  <div class="form-actions mt-4">
    <button
      type="button"
      class="btn btn-primary w-full"
      [disabled]="travelForm.invalid || loading"
      (click)="onSubmit()">
      Verbindungen suchen
    </button>
  </div>

  <!-- Ergebnisanzeige (wenn vorhanden) -->
  <div *ngIf="(travelResults?.trainConnections?.length ?? 0) > 0">
    <h3>Zugverbindungen</h3>
    <app-card-train
      *ngFor="let connection of travelResults?.trainConnections; let i = index"
      [connection]="connection"
      [index]="i"

    ></app-card-train>

    <app-card-train-details
      *ngIf="selectedConnection"
      [connection]="selectedConnection">
    </app-card-train-details>
  </div>
</div>
