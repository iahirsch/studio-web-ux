<div class="location-selector">
  <!-- Akkordeon 1: Startort -->
  <div class="card">
    <div
      class="inline-flex items-center justify-start gap-2 self-stretch opacity-90"
    >
      <div class="dot-purple-m"></div>
      <div class="justify-start text-base font-medium leading-none">
        Aktueller Standort,
        <span class="font-light text-gray-950"> {{ currentLocationLabel }}</span>
      </div>
    </div>

  </div>

  <div class="card">
    <details class="self-stretch inline-flex justify--between items-center">
      <summary class="p-4 cursor-pointer flex justify-between items-center">
        <div>
          <div class="dot-purple-m"></div>
          <h3 class="font-medium">Aktueller Standort,
            <p class="text-sm text-gray-600">{{ currentLocationLabel }}</p>
          </h3>

        </div>
        <span class="arrow"></span>
      </summary>
      <div class="p-4 border-t">

        <div class="flex flex-wrap gap-2 mt-2">
          <app-pills
            [pillType]="'location'"
            [pillItems]="fromLocationPills"
            (pillSelected)="onFromPillSelected($event)">
          </app-pills>
        </div>

      </div>
    </details>
  </div>

  <div class="inline-flex w-full items-start justify-start gap-4">
    <div class="flex-1">
      <div class="mb-1 self-stretch text-2xl font-medium leading-9">
        Hey, <span class="text-primary-500"><br /></span>
      </div>
      <div
        class="inline-flex items-center justify-start gap-2 self-stretch opacity-90"
      >
        <div class="dot-green-s"></div>
        <div class="justify-start text-xs font-medium leading-none">
          Aktueller Standort,
          <span class="font-light text-gray-950"> Emmenbrücke</span>
        </div>
      </div>
    </div>
    <div class="flex-none">
      <img alt="" class="size-12 rounded-[512px]" />
    </div>
  </div>

  <!-- Akkordeon 2: Zielort -->
  <div class="accordion mb-4">
    <details class="bg-white rounded-lg shadow-md">
      <summary class="p-4 cursor-pointer flex justify-between items-center">
        <div>
          <h3 class="font-medium">Zielort</h3>
          <p class="text-sm text-gray-600">{{ destinationLocationLabel }}</p>
        </div>
        <span class="arrow"></span>
      </summary>
      <div class="p-4 border-t">
        <div class="flex flex-wrap gap-2 mt-2">
          <app-pills
            [pillType]="'location'"
            [pillItems]="toLocationPills"
            (pillSelected)="onToPillSelected($event)">
          </app-pills>
        </div>

      </div>
    </details>
  </div>

  <!-- Formulardaten werden weiterhin über travelForm synchronisiert -->
  <div class="form-actions mt-4">
    <button
      type="button"
      class="btn btn-primary w-full"
      [disabled]="travelForm.invalid || loading"
      (click)="onSubmit()">
      Verbindungen suchen
    </button>
  </div>

  <!-- Ergebnisanzeige (wenn vorhanden) -->
  <div *ngIf="(travelResults?.trainConnections?.length ?? 0) > 0">
    <h3>Zugverbindungen</h3>
    <app-card-train
      *ngFor="let connection of travelResults?.trainConnections; let i = index"
      [connection]="connection"
      [index]="i"

    ></app-card-train>

    <app-card-train-details
      *ngIf="selectedConnection"
      [connection]="selectedConnection">
    </app-card-train-details>
  </div>
</div>
