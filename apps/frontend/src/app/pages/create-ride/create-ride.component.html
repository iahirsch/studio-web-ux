<div class="container flex flex-col mt-10 gap-5">
  <div class="items-center">
    <button class="absolute left-2 top-8.5" (click)="goBack()">
      <img
        src="/assets/icons/keyboard_arrow_down.svg"
        alt="arrow"
        class="rotate-90"
      />
    </button>
    <h2 class="flex justify-center">Fahrt erstellen</h2>
  </div>
  <div class="flex flex-col gap-2">
    <form [formGroup]="form">
    <h4 class="mx-2">Meine Strecke</h4>
    <app-location-selector
      (fromLocationSelected)="onFromLocationSelected($event)"
      (toLocationSelected)="onToLocationSelected($event)"
    ></app-location-selector>
    <app-date-time-picker (dateTimeSelected)="onDateTimeSelected($event)"></app-date-time-picker>
  </div>
  <div class="flex flex-col gap-2">
    <h4 class="mx-2">Organisation</h4>
    <app-map-pin-location
      [mode]="'select'"
      [locationFromSelector]="fromLocation"
      [(meetingPoint)]="meetingPoint"
    ></app-map-pin-location>
    <app-available-seats [seatsForm]="form"></app-available-seats>
    <h4>Mein Fahrzeug</h4>
    <ng-container formGroupName="carInfo">
      <app-plate-number formControlName="numberPlate"></app-plate-number>
    </ng-container>
    <app-car-info [seatsForm]="form"></app-car-info>
    <app-btn-primary
      (click)="onSubmit()"
      text="Fahrt aufschalten"
    ></app-btn-primary>
  </form>

  @if (submitted) {
    <div class="popup">
      <app-popup-feedback-car-ride
        class="mx-4"
        [carInfo]="createdCarInfo"
        [carConnection]="createdConnection"
        (popupClosed)="closePopup()"
      ></app-popup-feedback-car-ride>
    </div>
  }
</div>
